# Burn Rate Monitor 架构设计

## 1. 系统架构

```
┌─────────────────────────────────────────────────────────┐
│                    浏览器 (前端)                         │
│                  ECharts + HTML                         │
└─────────────────────┬───────────────────────────────────┘
                      │ HTTP
┌─────────────────────▼───────────────────────────────────┐
│                  FastAPI 服务器                          │
│                   (端口: 3001)                           │
├─────────────────────────────────────────────────────────┤
│  API层        │  计算层         │  数据层               │
│  /api/*       │  calculator     │  data_loader          │
└───────────────┴────────────────┴────────────────────────┘
                                          │
                      ┌───────────────────▼───────────────┐
                      │     Claude JSONL 文件              │
                      │  ~/.claude/projects/**/*.jsonl    │
                      │  ~/.config/claude/projects/**/*   │
                      └───────────────────────────────────┘
```

## 2. 技术选型

| 组件 | 技术 | 理由 |
|------|------|------|
| 后端框架 | FastAPI | Python生态，异步支持好 |
| 前端图表 | ECharts | 交互性强，悬停显示值 |
| 前端页面 | 单HTML文件 | 简单，无需构建 |
| 包管理 | pyproject.toml | 现代Python标准 |

## 3. 模块划分

| 模块 | 职责 |
|------|------|
| data_loader | 读取和解析JSONL文件 |
| calculator | 计算burn rate |
| server | HTTP服务和API |
| public/ | 静态前端文件 |

## 4. 数据流

1. 用户访问Web页面
2. 前端请求 `/api/burn-rate`
3. 服务器调用data_loader读取JSONL
4. calculator计算burn rate
5. 返回JSON数据
6. ECharts渲染图表
